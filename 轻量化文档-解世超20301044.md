# 轻量化文档-解世超20301044

> 聚焦于：
>
> 1. 下拉刷新的简单解析
>
> 2. utils\api.js的简单解析
> 3. mock文件夹的简单解析及设置说明

## 1.下拉刷新

其实直接看注释就行：

> 在index.json：
>
> {
>
>  "enablePullDownRefresh": true,
>
>  "backgroundTextStyle": "dark" ,
>
>  "backgroundColor": "#000000"
>
> }

> 在index.js：
>
>   // 添加：页面相关事件处理函数--监听用户下拉动作，下拉刷新
>
>   onPullDownRefresh() { // 下拉显示三个点在json中配置给出
>
>    // 显示顶部刷新图标，没有显示是因为网速太快了...;但是这个是顶部的text区域的加载
>
>    wx.showNavigationBarLoading(); 
>
>    // 刷新数据
>
>    this.setData({
>
> ​     newsCache: {},
>
> ​     news: {}
>
>    })
>
>    this.doLoadNews()
>
>    wx.showToast({title: '下拉刷新成功！',});
>
>    wx.stopPullDownRefresh() // 停止下拉刷新动画
>
>  },

## 2.utils\api.js的简单解析

### 2.1 整体风格

这里使用的是js中的异步函数：

async

其中主要使用的是：

await

> `async` 是 JavaScript 中用于定义异步函数的关键字。异步函数是一种特殊类型的函数，它使用 `async` 关键字进行声明，并可以包含 `await` 表达式来等待异步操作的结果。

### 2.2 文档的解析

> 当我解析文档时，我将为你提供每个函数的解析和作用：
>
> 1. `get(url, data)`: 发送GET请求的函数。
>    - 参数:
>      - `url` (字符串): 请求的URL。
>      - `data` (对象): 请求的参数。
>    - 返回值: 返回一个Promise对象，用于异步获取请求结果。
> 2. `post(url, data)`: 发送POST请求的函数。
>    - 参数:
>      - `url` (字符串): 请求的URL。
>      - `data` (对象): 请求的参数。
>    - 返回值: 返回一个Promise对象，用于异步获取请求结果。
> 3. `getCategroyList()`: 获取全部分类列表的函数。
>    - 返回值: 返回一个Promise对象，用于异步获取分类列表数据。函数内部会调用`get`函数来获取名为`api-category-list.json`的数据，并返回经过处理的分类列表。
> 4. `getSubscribeList()`: 读取关注列表的函数。
>    - 返回值: 返回一个Promise对象，用于异步获取存储中的关注列表数据。函数内部使用`wx.getStorage`方法读取存储中的数据。
> 5. `saveSubscribeList(subscribeList)`: 保存关注列表的函数。
>    - 参数:
>      - `subscribeList` (数组): 要保存的关注列表。
>    - 返回值: 返回一个Promise对象，用于异步保存关注列表数据到存储中。函数内部使用`wx.setStorage`方法将关注列表数据存储到本地。
> 6. `getHomeBannerList()`: 加载轮播图的函数。
>    - 返回值: 返回一个Promise对象，用于异步获取轮播图数据。函数内部会调用`get`函数来获取名为`api-banners.json`的数据，并返回结果。
> 7. `getNewsByCategory(categoryId, pageId = 1)`: 根据分类和页码加载数据的函数。
>    - 参数:
>      - `categoryId` (字符串): 分类ID。
>      - `pageId` (数字, 默认值: 1): 页码。
>    - 返回值: 返回一个Promise对象，用于异步获取根据分类和页码加载的数据。函数内部会调用`get`函数来获取名为`api-news-list.json`的数据，并对结果进行随机打乱后返回。
> 8. `getSubscribeChannels()`: 获取订阅频道列表的函数。
>    - 返回值: 返回一个Promise对象，用于异步获取订阅频道列表数据。函数内部会调用`get`函数来获取名为`api-subscibe-list.json`的数据，并返回结果。
> 9. `getArticleDetail(articleId)`: 获取文章详情的函数。
>    - 参数:
>      - `articleId` (字符串): 文章ID。
>    - 返回值: 返回一个Promise对象，用于异步获取文章详情数据。函数内部会调用`get`函数来获取名为`api-news-detail.json`的数据，并返回结果。
> 10. `request(api, method, data = {})`: 发送HTTP请求的函数。
>     - 参数:
>       - `api` (字符串): API的路径。
>       - `method` (字符串): 请求方法，可以是'GET'或'POST'。
>       - `data` (对象,默认值: {}): 请求的参数。
>     - 返回值: 返回一个Promise对象，用于异步发送HTTP请求并获取请求结果。函数内部使用`wx.request`方法发送请求，并根据请求结果返回相应的数据或错误信息。
>
> 请注意，上述函数中涉及到一些特定于小程序的API，如`wx.getStorage`和`wx.setStorage`用于读取和保存数据到本地存储。另外，`DOMAIN`常量用于指定API的域名地址。
>
> 这些函数共同构成了一个小程序文件项目中的API请求和数据处理逻辑。

## 3.mock中的json含义

- api-banners : 5个轮播图
- api-category-list: 所有的频道类别
- api-news-detail: 新闻文章的内容,这里只有一个
- api-news-list: 瀑布流推动的各个新闻
- api-subscibe-list: 我的订阅人